<div class="store-page">
  <div class="content-button-back">
    <app-back-button [ariaLabel]="'Voltar'" [route]="'/'"></app-back-button>
  </div>

  <header class="store-header">
    <div class="coin-display">
      <img class="coin-icon shimmer" src="/coin.png" alt="MB Coin" />
      <span class="coin-amount shimmer-text">{{ balance }}</span>
    </div>
    <h1 class="store-title">Loja</h1>
  </header>

  <section class="store-content">
    <div class="carousel">
      <div class="carousel-track">
        <div class="slide" *ngFor="let item of items; let i = index">
          <div class="gif-card">
            <img [src]="item.src" [alt]="item.name" />
          </div>
          <div class="actions">
            <button class="buy-btn" [disabled]="!canBuy(item)" (click)="buy(item)" *ngIf="!isPurchased(item)">
              Comprar ({{ item.cost }} coins)
            </button>
            <ng-container *ngIf="isPurchased(item)">
              <button class="buy-btn" (click)="apply(item)" *ngIf="!isApplied(item)">Aplicar</button>
              <div class="owned" *ngIf="isApplied(item)">
                Em uso
                <button class="remove-btn" (click)="clearApplied()" title="Remover este fundo">Remover</button>
              </div>
            </ng-container>
            <div class="insufficient" *ngIf="!isPurchased(item) && !canBuy(item)">
              Coins insuficientes
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>
