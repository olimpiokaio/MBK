<div class="legacy-container">
  <div class="top-bar">
    <app-back-button [back]="true" label="← VOLTAR" ariaLabel="Voltar"></app-back-button>
  </div>

  <h2 rel="legacy">Legado</h2>
  <p class="subtitle">Coleção de Selos.</p>

  <div class="filters" role="group" aria-label="Filtros de selos">
    <button class="filter-btn" [class.active]="filtro === 'all'" (click)="setFiltro('all')" [attr.aria-pressed]="filtro==='all'">Todos</button>
    <button class="filter-btn" [class.active]="filtro === 'earned'" (click)="setFiltro('earned')" [attr.aria-pressed]="filtro==='earned'">Conquistados</button>
    <button class="filter-btn" [class.active]="filtro === 'not-earned'" (click)="setFiltro('not-earned')" [attr.aria-pressed]="filtro==='not-earned'">Não conquistados</button>
  </div>

  <div class="selo-grid">
    <app-selo
      *ngFor="let selo of filteredSelos"
      [name]="selo.name"
      [image]="selo.image"
      [earned]="selo.earned || false"
      [ariaLabel]="selo.name"
      [title]="selo.name"
      (click)="openSelo(selo)"
    ></app-selo>
  </div>

  <!-- Overlay for description -->
  <div class="overlay" *ngIf="selectedSelo" (click)="closeOverlay()" role="dialog" aria-modal="true">
    <div class="overlay-content" (click)="$event.stopPropagation()">
      <button class="close-btn" (click)="closeOverlay()" aria-label="Fechar">×</button>
      <h3 class="overlay-title">{{ selectedSelo.name }}</h3>
      <p class="overlay-description">{{ getSeloDescription(selectedSelo.id || '') }}</p>
    </div>
  </div>
</div>
